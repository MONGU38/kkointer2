<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¼¬ê¼¬ë„ˆ - ê¼¬ë¦¬ì— ê¼¬ë¦¬ë¥¼ ë¬¼ì–´ ì°¾ì€ ë„ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ff6b35 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .floating-memory {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
            font-size: 2rem;
        }

        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            50% { opacity: 0.3; }
            90% { opacity: 0.1; }
        }

        .app-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            max-width: 700px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(0);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 90vh;
            overflow-y: auto;
        }

        .main-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
        }

        .app-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .app-title {
            font-size: 3rem;
            background: linear-gradient(135deg, #667eea, #764ba2, #ff6b35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            margin-bottom: 10px;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 5px rgba(102, 126, 234, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(118, 75, 162, 0.6)); }
        }

        .app-subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .app-description {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(255, 107, 53, 0.1));
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            line-height: 1.6;
        }

        .app-description::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .progress-container {
            margin: 20px 0;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            display: none;
        }

        .progress-bar {
            height: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .login-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .category-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .category-card {
            background: white;
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 20px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: #667eea;
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        }

        .category-card:hover::before {
            opacity: 0.1;
        }

        .category-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            transform: scale(1.02);
        }

        .category-icon {
            font-size: 2rem;
            position: relative;
            z-index: 1;
        }

        .category-title {
            font-weight: 600;
            color: #333;
            position: relative;
            z-index: 1;
            font-size: 1.1rem;
        }

        .sub-category {
            margin-top: 15px;
            display: none;
        }

        .sub-category.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .sub-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .sub-category-card {
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sub-category-card:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            transform: translateY(-3px);
        }

        .sub-category-card.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .question-section {
            display: none;
            margin-top: 30px;
        }

        .question-section.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-card.active {
            border-color: #667eea;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2);
        }

        .question-subtitle {
            font-size: 1rem;
            background: linear-gradient(135deg, #ffeb3b, #ffc107);
            color: #b8860b;
            margin-bottom: 20px;
            font-weight: 600;
            padding: 12px 20px;
            border-radius: 12px;
            border: 2px solid #ffc107;
            text-align: center;
            box-shadow: 0 3px 10px rgba(255, 193, 7, 0.3);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            font-family: inherit;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .tag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-weight: 500;
        }

        .tag:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
        }

        .tag.selected {
            background: linear-gradient(135deg, #ff6b35, #ff8f65);
            transform: scale(1.05);
        }

        .additional-input {
            margin-top: 10px;
        }

        .additional-input input {
            width: 100%;
            padding: 12px 15px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }

        .additional-input input:focus {
            border-color: #667eea;
            border-style: solid;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(108, 117, 125, 0.4);
        }

        .matching-results {
            display: none;
            margin-top: 30px;
        }

        .matching-results.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .match-list {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .match-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            background: rgba(102, 126, 234, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .match-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .match-info {
            flex: 1;
        }

        .match-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .match-details {
            font-size: 0.9rem;
            color: #666;
        }

        .match-percentage {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .comparison-section {
            display: none;
            margin-top: 30px;
        }

        .comparison-section.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .comparison-table {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .comparison-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .comparison-item:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .question-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
        }

        .answer-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .my-answer-section {
            text-align: center;
        }

        .partner-answer-section {
            text-align: center;
        }

        .answer-label {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .my-answer-label {
            color: #667eea;
        }

        .partner-answer-label {
            color: #ff6b35;
        }

        .answer-content {
            padding: 15px 20px;
            border-radius: 12px;
            font-weight: 500;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
        }

        .my-answer {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05));
            border: 2px solid rgba(102, 126, 234, 0.2);
            color: #333;
        }

        .partner-answer {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(255, 107, 53, 0.05));
            border: 2px solid rgba(255, 107, 53, 0.2);
            color: #333;
        }

        .chat-room {
            display: none;
        }

        .chat-room.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            text-align: center;
            font-weight: 600;
        }

        .chat-messages {
            background: white;
            padding: 20px;
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
            border: 2px solid #667eea;
            border-top: none;
        }

        .chat-input-area {
            background: white;
            padding: 20px;
            border: 2px solid #667eea;
            border-top: none;
            border-radius: 0 0 15px 15px;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 70%;
            line-height: 1.4;
        }

        .message.sent {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .message.received {
            background: #f1f3f4;
            color: #333;
        }

        @keyframes slideInUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .sparkle {
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        @media (max-width: 768px) {
            .app-container {
                padding: 10px;
                align-items: flex-start;
                padding-top: 20px;
            }

            .main-card {
                padding: 20px;
                margin: 0;
                max-height: none;
                min-height: auto;
                width: 100%;
                max-width: 100%;
            }
            
            .app-title {
                font-size: 2rem;
                margin-bottom: 8px;
            }

            .answer-comparison {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .comparison-item {
                padding: 15px;
            }

            .question-title {
                font-size: 1rem;
                padding: 10px 15px;
            }

            .answer-content {
                padding: 12px 15px;
                min-height: 45px;
                font-size: 0.9rem;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="bg-animation" id="bgAnimation"></div>

    <div class="app-container">
        <div class="main-card">
            <div class="app-header">
                <h1 class="app-title sparkle">ğŸ”— ê¼¬ê¼¬ë„ˆ</h1>
                <p class="app-subtitle">ê¼¬ë¦¬ì— ê¼¬ë¦¬ë¥¼ ë¬¼ì–´ ì°¾ì€ ë„ˆ</p>
                <div class="app-description">
                    <strong>ê¼¬ê¼¬ë„ˆëŠ” ë£° ë°©ì‹ìœ¼ë¡œ ë‹¹ì‹ ì˜ ê¸°ì–µì„ ë”ë“¬ì–´ì„œ<br>
                    ê·¸ë¦¬ìš´ ì‚¬ëŒì„ ì°¾ëŠ” ë° ë„ì›€ì„ ë“œë¦½ë‹ˆë‹¤.</strong><br><br>
                    ì´ë¦„, ì—°ë½ì²˜, ì‚¬ì§„ ë“± ëª…í™•í•œ ì •ë³´ê°€ ì—†ì–´ë„<br>
                    ì–´ë ´í’‹í•œ ê¸°ì–µë§Œìœ¼ë¡œ ì¸ì—°ì„ ì°¾ì„ ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ë°©ì‹ì˜ í”Œë«í¼ì…ë‹ˆë‹¤.
                </div>
            </div>

            <div class="login-section" id="loginSection">
                <button class="btn btn-primary" onclick="startApp()">ë¡œê·¸ì¸</button>
                <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">ë² íƒ€ ë²„ì „ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì‹œì‘í•˜ì„¸ìš”</p>
            </div>

            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div class="category-section hidden" id="mainCategorySection">
                <h3 class="section-title">ì•ˆë…•í•˜ì„¸ìš”. ì°¾ê³  ì‹¶ì€ ì‚¬ëŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.</h3>
                <div class="category-grid">
                    <div class="category-card" onclick="selectMainCategory('missing')">
                        <span class="category-icon">ğŸ‘¶</span>
                        <div class="category-title">ì‹¤ì¢…ì•„ë™(ê°€ì¡±)</div>
                    </div>
                    <div class="category-card" onclick="selectMainCategory('separated')">
                        <span class="category-icon">ğŸ‘´</span>
                        <div class="category-title">ì´ì‚°ê°€ì¡±</div>
                    </div>
                    <div class="category-card" onclick="selectMainCategory('friends')">
                        <span class="category-icon">ğŸ‘¥</span>
                        <div class="category-title">ê·¸ë¦¬ìš´ì¹œêµ¬</div>
                    </div>
                </div>

                <div class="sub-category" id="friendsSubCategory">
                    <div class="sub-category-grid">
                        <div class="sub-category-card" onclick="selectSubCategory('neighborhood')">ë™ë„¤ì¹œêµ¬</div>
                        <div class="sub-category-card" onclick="selectSubCategory('school')">í•™êµì¹œêµ¬</div>
                        <div class="sub-category-card" onclick="selectSubCategory('military')">êµ°ëŒ€ì¹œêµ¬</div>
                        <div class="sub-category-card" onclick="selectSubCategory('work')">ì§ì¥ì¹œêµ¬</div>
                    </div>
                </div>

                <div class="sub-category" id="schoolSubCategory">
                    <div class="sub-category-grid">
                        <div class="sub-category-card" onclick="selectSchoolType('kindergarten')">ìœ ì¹˜ì›</div>
                        <div class="sub-category-card" onclick="selectSchoolType('elementary')">ì´ˆë“±í•™êµ</div>
                        <div class="sub-category-card" onclick="selectSchoolType('middle')">ì¤‘í•™êµ</div>
                        <div class="sub-category-card" onclick="selectSchoolType('high')">ê³ ë“±í•™êµ</div>
                        <div class="sub-category-card" onclick="selectSchoolType('university')">ëŒ€í•™êµ/ëŒ€í•™ì›</div>
                        <div class="sub-category-card" onclick="selectSchoolType('other')">ê¸°íƒ€</div>
                    </div>
                </div>

                <div class="sub-category" id="missingSubCategory">
                    <div class="sub-category-grid">
                        <div class="sub-category-card" onclick="selectMissingType('child')">ì‹¤ì¢…ì•„ë™</div>
                        <div class="sub-category-card" onclick="selectMissingType('family')">ì‹¤ì¢…ê°€ì¡±</div>
                    </div>
                </div>
            </div>

            <div class="question-section" id="questionSection">
                <div class="question-card active">
                    <p class="question-subtitle">ì‚¬ë¡€ ì¤‘ì—ì„œ ì—¬ëŸ¬ê°œ ì„ íƒí•´ë„ ë˜ë©° í•´ë‹¹ ì‚¬í•­ì´ ì—†ìœ¼ë©´ ë¹ˆì¹¸ì— ì…ë ¥í•´ ì£¼ì„¸ìš”. ì…ë ¥ ìë£Œê°€ ë§ì„ ê²½ìš° ë°˜ë“œì‹œ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì£¼ì„¸ìš”.</p>
                    
                    <div id="questionsContainer">
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn btn-primary" onclick="startMatching()" id="startMatchingBtn">ë§¤ì¹­ ì‹œì‘í•˜ê¸°</button>
                    </div>
                </div>
            </div>

            <div class="matching-results" id="matchingResults">
                <div class="match-list">
                    <h3 style="margin-bottom: 20px; color: #333;">ë§¤ì¹­ ê²°ê³¼</h3>
                    <div id="matchList">
                    </div>
                </div>
            </div>

            <div class="comparison-section" id="comparisonSection">
                <div class="comparison-table">
                    <h3 style="margin-bottom: 25px; color: #333; text-align: center; font-size: 1.3rem;">ìƒì„¸ ë¹„êµ ì •ë³´</h3>
                    <div id="comparisonContent">
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn btn-primary" onclick="proceedToChat()">ì±„íŒ…ë°© ì…ì¥í•˜ê¸°</button>
                        <button class="btn btn-secondary" onclick="goBackToMatching()">ë‹¤ë¥¸ ë§¤ì¹­ ë³´ê¸°</button>
                    </div>
                </div>
            </div>

            <div class="chat-room" id="chatRoom">
                <div class="chat-header">
                    <h3 id="chatPartnerName">ê¹€â—‹â—‹ë‹˜ê³¼ì˜ ëŒ€í™”</h3>
                </div>
                <div class="chat-messages" id="chatMessages">
                </div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" id="chatInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="if(event.key==='Enter') sendMessage()">
                    <button class="send-btn" onclick="sendMessage()">ì „ì†¡</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 'login';
        let selectedCategory = '';
        let selectedSubCategory = '';
        let selectedSchoolType = '';
        let answers = {};
        let currentPartner = null;
        let chatStep = 0;

        const missingChildQuestions = [
            {
                id: 'name',
                question: 'ë‹¹ì‹ ì˜ ì´ë¦„ê³¼ ë³„ëª…ì„ ì•Œë ¤ì£¼ì„¸ìš”.',
                type: 'text',
                placeholder: 'ì˜ˆ: ê¹€ì² ìˆ˜, ì² ì´'
            },
            {
                id: 'lastMemoryAge',
                question: 'ê°€ì¡±ë“¤ê³¼ ë§ˆì§€ë§‰ ê¸°ì–µì€ ëª‡ ì‚´ ë•Œì˜€ë‚˜ìš”?',
                type: 'text',
                placeholder: 'ì˜ˆ: 5ì‚´, 7ì„¸'
            },
            {
                id: 'bodyFeatures',
                question: 'ëª¸ì— ì ì´ë‚˜ ìƒì²˜ ë“± íŠ¹ì§•ì€ ìˆì—ˆë‚˜ìš”?',
                type: 'textarea',
                placeholder: 'ì˜ˆ: ì™¼ìª½ ì–´ê¹¨ì— ë™ì „ í¬ê¸° ì , ì˜¤ë¥¸ì† ê²€ì§€ì— ì‘ì€ ìƒì²˜'
            },
            {
                id: 'houseStructure',
                question: 'ì‚´ë˜ ì§‘ì€ ì–´ë–¤ êµ¬ì¡°ì˜€ë‚˜ìš”?',
                type: 'tags',
                options: ['ì–‘ì˜¥', 'í•œì˜¥', 'ì•„íŒŒíŠ¸', 'ì—°ë¦½ì£¼íƒ', 'ë‹¨ë…ì£¼íƒ']
            },
            {
                id: 'doorFeatures',
                question: 'ëŒ€ë¬¸ ìƒ‰ê¹”ê³¼ ì¬ì§ˆì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?',
                type: 'tags',
                options: ['ë‚˜ë¬´', 'ì² ', 'íŒŒë€ìƒ‰', 'ì´ˆë¡ìƒ‰', 'ê°ˆìƒ‰', 'íšŒìƒ‰']
            },
            {
                id: 'stairs',
                question: 'ì§‘ ì•ì— ê³„ë‹¨ì€ ìˆì—ˆë‚˜ìš”? ê°œìˆ˜ëŠ”?',
                type: 'text',
                placeholder: 'ì˜ˆ: 3ê°œ, ê³„ë‹¨ ì—†ìŒ'
            },
            {
                id: 'nearbyPlaces',
                question: 'ê·¼ì²˜ì— ìˆì—ˆë˜ ì¥ì†ŒëŠ”?',
                type: 'tags',
                options: ['ì•½êµ­', 'ê²½ì°°ì„œ', 'ê¸°ì°»ê¸¸', 'ìš°ë¬¼', 'ë§ˆì„íšŒê´€', 'ìƒì ', 'í•™êµ']
            },
            {
                id: 'religiousItems',
                question: 'ì¢…êµ ê´€ë ¨ ë¬¼ê±´(ì‹­ìê°€, ë¶ˆìƒ ë“±)ì€ ìˆì—ˆë‚˜ìš”?',
                type: 'textarea',
                placeholder: 'ì˜ˆ: ê±°ì‹¤ì— ì‹­ìê°€, ë°©ì— ë¶ˆìƒ'
            },
            {
                id: 'yard',
                question: 'ë§ˆë‹¹ì´ë‚˜ í…ƒë°­ì´ ìˆì—ˆë‚˜ìš”?',
                type: 'text',
                placeholder: 'ì˜ˆ: ì•ë§ˆë‹¹ ìˆìŒ, ë’·ë§ˆë‹¹ì— í…ƒë°­'
            },
            {
                id: 'yardItems',
                question: 'ë§ˆë‹¹ì—ëŠ” ë¬´ì—‡ì´ ìˆì—ˆë‚˜ìš”?',
                type: 'tags',
                options: ['ì—°ëª»', 'í™”ì¥ì‹¤', 'ê°•ì•„ì§€ì§‘', 'ì¥ë…ëŒ€', 'í™”ë‹¨', 'ìš°ë¬¼', 'ë‚˜ë¬´']
            }
        ];

        const friendQuestions = [
            {
                id: 'targetName',
                question: 'ì°¾ê³  ê³„ì‹  ë¶„ì˜ ì´ë¦„ì´ë‚˜ ë³„ëª…ì„ ì•Œë ¤ì£¼ì„¸ìš”.',
                type: 'text',
                placeholder: 'ì˜ˆ: ê¹€ì² ìˆ˜, ì² ì´'
            },
            {
                id: 'whenMet',
                question: 'ì–¸ì œ ë§Œë‚¬ë˜ ê¸°ì–µì´ ìˆë‚˜ìš”?',
                type: 'text',
                placeholder: 'ì˜ˆ: 2010ë…„ ì—¬ë¦„, ê³ ë“±í•™êµ 1í•™ë…„ ë•Œ'
            },
            {
                id: 'whereMet',
                question: 'ì–´ë””ì„œ ë§Œë‚¬ë‚˜ìš”?',
                type: 'text',
                placeholder: 'ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬, ë¶€ì‚° í•´ìš´ëŒ€'
            },
            {
                id: 'appearance',
                question: 'ê·¸ ë¶„ì˜ ì™¸ëª¨ íŠ¹ì§•ì€?',
                type: 'tags',
                options: ['í‚¤ í°', 'í‚¤ ì‘ì€', 'ëš±ëš±í•œ', 'ë§ˆë¥¸', 'ì•ˆê²½ ì°©ìš©', 'ê³±ìŠ¬ë¨¸ë¦¬', 'ì§ëª¨', 'ìŒêº¼í’€', 'ë‹¨ë°œë¨¸ë¦¬', 'ê¸´ë¨¸ë¦¬']
            },
            {
                id: 'personality',
                question: 'ì„±ê²©ì€ ì–´ë• ë‚˜ìš”?',
                type: 'tags',
                options: ['í™œë°œí•œ', 'ì¡°ìš©í•œ', 'ìœ ë¨¸ëŸ¬ìŠ¤í•œ', 'ì§„ì§€í•œ', 'ì¹œì ˆí•œ', 'ë¦¬ë”ì‹­ ìˆëŠ”', 'ìˆ˜ì¤ì€', 'ëŒ€ë‹´í•œ']
            },
            {
                id: 'hobbies',
                question: 'ì·¨ë¯¸ë‚˜ íŠ¹ê¸°ê°€ ìˆì—ˆë‚˜ìš”?',
                type: 'tags',
                options: ['ì¶•êµ¬', 'ë†êµ¬', 'ìŒì•…', 'ê·¸ë¦¼', 'ë…ì„œ', 'ê²Œì„', 'ìš”ë¦¬', 'ì¶¤', 'ìˆ˜ì˜', 'íƒœê¶Œë„']
            },
            {
                id: 'features',
                question: 'ê·¸ ë¶„ì˜ íŠ¹ì§•ì´ë‚˜ ê¸°ì–µë‚˜ëŠ” ê²ƒë“¤ì„ ììœ ë¡­ê²Œ ì¨ì£¼ì„¸ìš”.',
                type: 'textarea',
                placeholder: 'í•¨ê»˜í–ˆë˜ ì¼ë“¤, ê¸°íƒ€ ê¸°ì–µë‚˜ëŠ” ëª¨ë“  ê²ƒë“¤...'
            }
        ];

        const sampleAnswers = {
            missing: {
                name: 'ê¹€ì² ìˆ˜',
                doorFeatures: ['íŒŒë€ìƒ‰', 'ë‚˜ë¬´'],
                houseStructure: ['ë‹¨ë…ì£¼íƒ'],
                stairs: '3ê°œ',
                nearbyPlaces: ['ìƒì ', 'ìš°ë¬¼'],
                yardItems: ['ì¥ë…ëŒ€', 'ë‚˜ë¬´'],
                lastMemoryAge: '7ì‚´',
                bodyFeatures: 'ì™¼ìª½ ì–´ê¹¨ì— ë™ì „ í¬ê¸° ì ',
                religiousItems: 'ê±°ì‹¤ì— ì‹­ìê°€',
                yard: 'ì•ë§ˆë‹¹ ìˆìŒ'
            },
            friends: {
                targetName: 'ìµœë¯¼ìˆ˜',
                appearance: ['í‚¤ í°', 'ì•ˆê²½ ì°©ìš©'],
                personality: ['í™œë°œí•œ', 'ìœ ë¨¸ëŸ¬ìŠ¤í•œ'],
                hobbies: ['ì¶•êµ¬', 'ìŒì•…'],
                whenMet: '2015ë…„ ë´„',
                whereMet: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬',
                features: 'í•­ìƒ ì›ƒê³  ìˆì—ˆê³ , ì¶•êµ¬ë¥¼ ì •ë§ ì˜í–ˆì–´ìš”. ê°™ì´ PCë°©ë„ ìì£¼ ê°”ë˜ ê¸°ì–µì´ ë‚˜ë„¤ìš”.'
            }
        };

        function initBackgroundAnimation() {
            const bgAnimation = document.getElementById('bgAnimation');
            const memories = ['ğŸ’­', 'â¤ï¸', 'ğŸŒŸ', 'ğŸ“š', 'ğŸµ', 'âš½', 'ğŸ®', 'âœ¨', 'ğŸŒˆ', 'ğŸ’«', 'ğŸ¯', 'ğŸ”', 'ğŸ’¡', 'ğŸ ', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', 'ğŸª'];
            
            setInterval(() => {
                const memory = document.createElement('div');
                memory.className = 'floating-memory';
                memory.textContent = memories[Math.floor(Math.random() * memories.length)];
                memory.style.left = Math.random() * 100 + '%';
                memory.style.animationDelay = Math.random() * 2 + 's';
                memory.style.animationDuration = (15 + Math.random() * 10) + 's';
                
                bgAnimation.appendChild(memory);
                
                setTimeout(() => {
                    if (memory.parentNode) {
                        memory.parentNode.removeChild(memory);
                    }
                }, 25000);
            }, 3000);
        }

        function startApp() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('mainCategorySection').classList.remove('hidden');
            document.getElementById('progressContainer').style.display = 'block';
            updateProgress(20);
            currentStep = 'category';
        }

        function selectMainCategory(category) {
            selectedCategory = category;
            
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            event.target.closest('.category-card').classList.add('selected');
            
            hideAllSubCategories();
            if (category === 'friends') {
                document.getElementById('friendsSubCategory').classList.add('active');
            } else if (category === 'missing') {
                document.getElementById('missingSubCategory').classList.add('active');
            } else {
                setTimeout(() => {
                    startQuestions();
                }, 500);
            }
            
            updateProgress(40);
        }

        function selectSubCategory(subCategory) {
            selectedSubCategory = subCategory;
            
            document.querySelectorAll('#friendsSubCategory .sub-category-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // í•™êµì¹œêµ¬ê°€ ì•„ë‹Œ ê²½ìš° ìƒìœ„ ì¹´í…Œê³ ë¦¬ ìˆ¨ê¸°ê¸°
            if (subCategory !== 'school') {
                document.getElementById('friendsSubCategory').style.display = 'none';
                setTimeout(() => {
                    startQuestions();
                }, 500);
            } else {
                // í•™êµì¹œêµ¬ì¸ ê²½ìš° ë‹¤ë¥¸ ì˜µì…˜ë“¤ ìˆ¨ê¸°ê³  í•™êµ ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ë§Œ í‘œì‹œ
                const otherCards = document.querySelectorAll('#friendsSubCategory .sub-category-card');
                otherCards.forEach(card => {
                    if (!card.classList.contains('selected')) {
                        card.style.display = 'none';
                    }
                });
                document.getElementById('schoolSubCategory').classList.add('active');
            }
            
            updateProgress(60);
        }

        function selectSchoolType(schoolType) {
            selectedSchoolType = schoolType;
            
            document.querySelectorAll('#schoolSubCategory .sub-category-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            setTimeout(() => {
                startQuestions();
            }, 500);
            
            updateProgress(80);
        }

        function selectMissingType(missingType) {
            selectedSubCategory = missingType;
            
            document.querySelectorAll('#missingSubCategory .sub-category-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            setTimeout(() => {
                startQuestions();
            }, 500);
            
            updateProgress(80);
        }

        function hideAllSubCategories() {
            document.querySelectorAll('.sub-category').forEach(sub => {
                sub.classList.remove('active');
            });
        }

        function startQuestions() {
            document.getElementById('mainCategorySection').classList.add('hidden');
            document.getElementById('questionSection').classList.add('active');
            
            if (selectedCategory === 'missing' && selectedSubCategory === 'child') {
                loadMissingChildQuestions();
            } else {
                loadFriendQuestions();
            }
            
            updateProgress(90);
        }

        function loadMissingChildQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            missingChildQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'form-group';
                questionDiv.style.animationDelay = `${index * 0.1}s`;
                
                let inputHTML = '';
                if (q.type === 'text') {
                    inputHTML = `<input type="text" class="form-input" id="${q.id}" placeholder="${q.placeholder}">`;
                } else if (q.type === 'textarea') {
                    inputHTML = `<textarea class="form-textarea" id="${q.id}" placeholder="${q.placeholder}"></textarea>`;
                } else if (q.type === 'tags') {
                    inputHTML = `
                        <div class="tag-container">
                            ${q.options.map(option => `<button class="tag" onclick="toggleTag(this, '${q.id}', '${option}')">${option}</button>`).join('')}
                        </div>
                        <div class="additional-input">
                            <input type="text" placeholder="ê¸°íƒ€ ì…ë ¥ (ì‰¼í‘œë¡œ êµ¬ë¶„)" id="${q.id}_additional">
                        </div>
                    `;
                }
                
                questionDiv.innerHTML = `
                    <label class="form-label">${q.question}</label>
                    ${inputHTML}
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function loadFriendQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            friendQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'form-group';
                questionDiv.style.animationDelay = `${index * 0.1}s`;
                
                let inputHTML = '';
                if (q.type === 'text') {
                    inputHTML = `<input type="text" class="form-input" id="${q.id}" placeholder="${q.placeholder}">`;
                } else if (q.type === 'textarea') {
                    inputHTML = `<textarea class="form-textarea" id="${q.id}" placeholder="${q.placeholder}"></textarea>`;
                } else if (q.type === 'tags') {
                    inputHTML = `
                        <div class="tag-container">
                            ${q.options.map(option => `<button class="tag" onclick="toggleTag(this, '${q.id}', '${option}')">${option}</button>`).join('')}
                        </div>
                        <div class="additional-input">
                            <input type="text" placeholder="ê¸°íƒ€ ì…ë ¥ (ì‰¼í‘œë¡œ êµ¬ë¶„)" id="${q.id}_additional">
                        </div>
                    `;
                }
                
                questionDiv.innerHTML = `
                    <label class="form-label">${q.question}</label>
                    ${inputHTML}
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function toggleTag(element, questionId, value) {
            element.classList.toggle('selected');
            
            if (!answers[questionId]) {
                answers[questionId] = [];
            }
            
            const index = answers[questionId].indexOf(value);
            if (index > -1) {
                answers[questionId].splice(index, 1);
            } else {
                answers[questionId].push(value);
            }
        }

        function startMatching() {
            // ì¼ë°˜ ì…ë ¥ í•„ë“œ ìˆ˜ì§‘
            document.querySelectorAll('.form-input, .form-textarea').forEach(input => {
                if (input.value.trim()) {
                    answers[input.id] = input.value.trim();
                }
            });

            // ê¸°íƒ€ ì…ë ¥ í•„ë“œ ìˆ˜ì§‘
            document.querySelectorAll('[id$="_additional"]').forEach(input => {
                if (input.value.trim()) {
                    const questionId = input.id.replace('_additional', '');
                    if (!answers[questionId]) {
                        answers[questionId] = [];
                    }
                    const additionalValues = input.value.split(',').map(v => v.trim()).filter(v => v);
                    answers[questionId] = [...answers[questionId], ...additionalValues];
                }
            });
            
            console.log('ìˆ˜ì§‘ëœ ë‹µë³€:', answers);
            
            const btn = document.getElementById('startMatchingBtn');
            const originalText = btn.textContent;
            btn.innerHTML = '<span style="display: inline-block; width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: white; animation: spin 1s linear infinite;"></span> ë§¤ì¹­ ì¤‘...';
            btn.disabled = true;
            
            setTimeout(() => {
                showMatchingResults();
                btn.innerHTML = originalText;
                btn.disabled = false;
                updateProgress(100);
            }, 3000);
        }

        function showMatchingResults() {
            document.getElementById('questionSection').classList.remove('active');
            document.getElementById('matchingResults').classList.add('active');
            
            const matchList = document.getElementById('matchList');
            
            if (selectedCategory === 'missing' && selectedSubCategory === 'child') {
                matchList.innerHTML = `
                    <div class="match-item" onclick="showComparison('ê¹€â—‹â—‹', 1)">
                        <div class="match-info">
                            <div class="match-name">ê¹€â—‹â—‹</div>
                            <div class="match-details">ë¹„ìŠ·í•œ ì‹œê¸°, ë¹„ìŠ·í•œ ì§€ì—­ â€¢ ì§‘ êµ¬ì¡° ì¼ì¹˜</div>
                        </div>
                        <div class="match-percentage">87%</div>
                    </div>
                    <div class="match-item" onclick="showComparison('ì´â—‹â—‹', 2)">
                        <div class="match-info">
                            <div class="match-name">ì´â—‹â—‹</div>
                            <div class="match-details">ë§ˆë‹¹ íŠ¹ì§• ì¼ì¹˜ â€¢ ê·¼ì²˜ ì¥ì†Œ ìœ ì‚¬</div>
                        </div>
                        <div class="match-percentage">73%</div>
                    </div>
                    <div class="match-item" onclick="showComparison('ë°•â—‹â—‹', 3)">
                        <div class="match-info">
                            <div class="match-name">ë°•â—‹â—‹</div>
                            <div class="match-details">ì§‘ ì• ê³„ë‹¨ ê°œìˆ˜ ì¼ì¹˜ â€¢ ëŒ€ë¬¸ ìƒ‰ê¹” ìœ ì‚¬</div>
                        </div>
                        <div class="match-percentage">65%</div>
                    </div>
                `;
            } else {
                matchList.innerHTML = `
                    <div class="match-item" onclick="showComparison('ìµœâ—‹â—‹', 1)">
                        <div class="match-info">
                            <div class="match-name">ìµœâ—‹â—‹</div>
                            <div class="match-details">ê°™ì€ ì‹œê¸°, ê°™ì€ ì§€ì—­ â€¢ í•™êµ ì¼ì¹˜ ê°€ëŠ¥ì„±</div>
                        </div>
                        <div class="match-percentage">91%</div>
                    </div>
                    <div class="match-item" onclick="showComparison('ì •â—‹â—‹', 2)">
                        <div class="match-info">
                            <div class="match-name">ì •â—‹â—‹</div>
                            <div class="match-details">ë¹„ìŠ·í•œ íŠ¹ì§• â€¢ ì´ë¦„ ìœ ì‚¬ì„±</div>
                        </div>
                        <div class="match-percentage">78%</div>
                    </div>
                `;
            }
        }

        function showComparison(partnerName, partnerId) {
            currentPartner = { name: partnerName, id: partnerId };
            
            document.getElementById('matchingResults').classList.remove('active');
            document.getElementById('comparisonSection').classList.add('active');
            
            const content = document.getElementById('comparisonContent');
            let comparisonHTML = '';
            
            const currentSample = selectedCategory === 'missing' ? sampleAnswers.missing : sampleAnswers.friends;
            const partnerSample = selectedCategory === 'missing' ? 
                { ...sampleAnswers.missing, doorFeatures: ['íŒŒë€ìƒ‰', 'ì² '], nearbyPlaces: ['ê²½ì°°ì„œ', 'ìƒì '] } :
                { ...sampleAnswers.friends, appearance: ['í‚¤ í°', 'ì§ëª¨'], personality: ['í™œë°œí•œ', 'ì¹œì ˆí•œ'] };
            
            const questions = selectedCategory === 'missing' ? missingChildQuestions : friendQuestions;
            
            questions.forEach(q => {
                const myAnswer = answers[q.id] || currentSample[q.id] || 'ì •ë³´ ì—†ìŒ';
                const partnerAnswer = partnerSample[q.id] || 'ì •ë³´ ì—†ìŒ';
                
                const myAnswerStr = Array.isArray(myAnswer) ? myAnswer.join(', ') : myAnswer;
                const partnerAnswerStr = Array.isArray(partnerAnswer) ? partnerAnswer.join(', ') : partnerAnswer;
                
                comparisonHTML += `
                    <div class="comparison-item">
                        <div class="question-title">${q.question}</div>
                        <div class="answer-comparison">
                            <div class="my-answer-section">
                                <div class="answer-label my-answer-label">ë‚˜ì˜ ë‹µë³€</div>
                                <div class="answer-content my-answer">${myAnswerStr}</div>
                            </div>
                            <div class="partner-answer-section">
                                <div class="answer-label partner-answer-label">${currentPartner.name}ë‹˜ì˜ ë‹µë³€</div>
                                <div class="answer-content partner-answer">${partnerAnswerStr}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = comparisonHTML;
        }

        function proceedToChat() {
            document.getElementById('comparisonSection').classList.remove('active');
            document.getElementById('chatRoom').classList.add('active');
            document.getElementById('chatPartnerName').textContent = `${currentPartner.name}ë‹˜ê³¼ì˜ ëŒ€í™”`;
            
            startChatSequence();
        }

        function goBackToMatching() {
            document.getElementById('comparisonSection').classList.remove('active');
            document.getElementById('matchingResults').classList.add('active');
        }

        function startChatSequence() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            chatStep = 0;
            
            const partnerQuestions = [
                "ì•ˆë…•í•˜ì„¸ìš”! ë§¤ì¹­ë˜ì–´ì„œ ì—°ë½ë“œë¦½ë‹ˆë‹¤. í˜¹ì‹œ ì €ë¥¼ ê¸°ì–µí•˜ì‹œë‚˜ìš”?",
                "ì •ë§ ë°˜ê°‘ë„¤ìš”! í˜¹ì‹œ ê·¸ë•Œ ê·¸ ê³³ì—ì„œ ìì£¼ ë§Œë‚¬ë˜ ê¸°ì–µì´ ìˆìœ¼ì‹ ê°€ìš”?",
                "ë§ëŠ” ê²ƒ ê°™ì•„ìš”! ê·¸ëŸ°ë° í˜¹ì‹œ ê·¸ë•Œ í•¨ê»˜í–ˆë˜ íŠ¹ë³„í•œ ì¶”ì–µì´ ìˆìœ¼ì‹ ì§€ìš”?"
            ];
            
            setTimeout(() => {
                addMessage(partnerQuestions[0], 'received');
            }, 1000);
        }

        function addMessage(text, type) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage(message, 'sent');
            input.value = '';
            
            chatStep++;
            
            const partnerResponses = [
                "ì •ë§ ê¸°ì©ë‹ˆë‹¤! ì €ë„ ê·¸ë•Œê°€ ìƒê°ë‚˜ë„¤ìš”.",
                "ë„¤, ë§ì•„ìš”! ì •ë§ ì˜¤ëœë§Œì´ì—ìš”. ê·¸ë•Œ ì •ë§ ì¬ë¯¸ìˆì—ˆëŠ”ë°...",
                "ì™€, ì •ë§ ë†€ë¼ì›Œìš”! ì´ë ‡ê²Œ ë‹¤ì‹œ ë§Œë‚˜ê²Œ ë˜ë‹¤ë‹ˆ... ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ‰"
            ];
            
            if (chatStep <= partnerResponses.length) {
                setTimeout(() => {
                    addMessage(partnerResponses[chatStep - 1], 'received');
                    
                    if (chatStep < 3) {
                        const nextQuestions = [
                            "ê·¸ëŸ°ë° í˜¹ì‹œ ê·¸ë•Œ ìì£¼ ë§Œë‚¬ë˜ ì¥ì†Œê°€ ê¸°ì–µë‚˜ì‹œë‚˜ìš”?",
                            "ì €ë„ ê·¸ë˜ìš”! ê·¸ë•Œ ìš°ë¦¬ê°€ í•¨ê»˜í–ˆë˜ ì¼ ì¤‘ì— ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ê±´ ë­”ê°€ìš”?"
                        ];
                        
                        setTimeout(() => {
                            addMessage(nextQuestions[chatStep - 1], 'received');
                        }, 1500);
                    } else {
                        setTimeout(() => {
                            addMessage("ì•ìœ¼ë¡œë„ ê³„ì† ì—°ë½í•˜ë©° ì§€ë‚´ìš”! ì •ë§ ê¸°ë»ìš”! ğŸ˜Š", 'received');
                        }, 2000);
                    }
                }, 1000);
            }
        }

        function updateProgress(percentage) {
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        window.addEventListener('load', function() {
            initBackgroundAnimation();
        });
    </script>
</body>
</html>
